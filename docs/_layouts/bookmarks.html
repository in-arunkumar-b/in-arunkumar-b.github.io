---
layout: base
---

<style type="text/css">

    :root
    {
        --default-bookmark-icon: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABJUlEQVR42mKgOogpKJBMTM08kJCS+RXAJ1UbVBRDUWQIRmACWmwEpHxuN8GpkRIdAOuRfehwnQDXe7696C+eJkdvoox+ceEd/7DWFZyUcinO6JNBf3FOP/z+HGXirkX0hzXs8YJbG78ZvHp2dtaP/3E+Owqwcv1aJLDGSl8Ap6kY7JDmcjfK6UklaDvR4iBfy/Zq+19cyCETqF7AdAiilF6RGbYV0hFWOm9dbyYBiu0QIBcK85XLm090guoDGI3AUPiOM3HJrtbhKs8XBvh7k4mO+DkNMWC0CL6saS5D1Q0IERcRrBKdVy729Ti0apaojlEFHvI1k+Q03t6HESOeMUbjILUJCpo0bK8C7DxI9ezFMtibDuiLQY8oDJn/h5yUKctM1AYAkF4mBkXjJukAAAAASUVORK5CYII=');
        --default-bookmark-folder: url('data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iIzQyODVGNCI+PHBhdGggZD0iTTIwIDZoLThsLTItMkg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY4YzAtMS4xLS45LTItMi0yem0wIDEySDRWOGgxNnYxMHoiLz48L3N2Zz4=');
    }

    .bookmark-tab-container
    {
        padding: 1rem;
        border-radius: 8px;
    }

    .tabs
    {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
    }

    .tab
    {
        cursor: pointer;
        text-align: left;
        border-inline-start: 0.5rem solid transparent;
        border-inline-end: 0.5rem solid transparent;
        border-block-start: 0.25rem solid transparent;
        border-block-end: 0.25rem solid transparent;
        border-radius: 4px;
        padding-inline-start: 1.5rem;
        padding-inline-end: 0.25rem;
        padding-block-start: 0.1rem;
        padding-block-end: 0.1rem;
        background-image: var(--default-bookmark-folder);
        background-repeat: no-repeat;
        background-position-x: left;
        background-position-y: center;
        background-size: 1.3rem 1.3rem;
    }

        .tab.active
        {
            font-weight: 600;
        }

        .tab:hover
        {
            font-style: oblique;
        }

    .tab-content
    {
        display: none;
    }

        .tab-content.active
        {
            display: block;
        }

        .tab-content a
        {
            padding-left: 24px;
            background-image: var(--default-bookmark-icon);
            background-repeat: no-repeat;
            background-position-x: left;
            background-position-y: center;
            background-size: 16px 16px;
        }
</style>

<div>
    <div class="bookmark-tab-container">
        <div class="tabs">
        </div>
    </div>
    {{ content }}
</div>


<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>

<script type="text/javascript">

    function updateIcons(contentElement)
    {
        contentElement.querySelectorAll("a").forEach((a) =>
        {
            try
            {
                if (a.hasAttribute("icon"))
                {
                    a.style.setProperty("background-image", "url('" + a.getAttribute("icon") + "')");
                    a.removeAttribute("icon");
                }
            } catch (err) { console.error(err); }
        });
    }

    function fetchBookmarksData()
    {
        let tab_container_Element = document.getElementsByClassName("bookmark-tab-container")[0];
        let tabs_Element = document.getElementsByClassName("tabs")[0];
        let temp = document.getElementsByTagName("template")[0];

        let bk_items = temp.content.children;
        for (let i = 0; i < bk_items.length; i++)
        {
            let div_tab_content = document.createElement("div");
            let tab_button = document.createElement("button");

            div_tab_content.id = "div_tab_content_" + i.toString();
            div_tab_content.className = "tab-content";

            tab_button.setAttribute("data-tab", div_tab_content.id);
            tab_button.className = "tab";
            tab_button.innerText = bk_items[i].innerText;

            tab_container_Element.appendChild(div_tab_content);
            tabs_Element.appendChild(tab_button);

            fetch(bk_items[i].value)
                .then(response => response.text())
                .then(markdown =>
                {
                    const dirtyHTML = marked.parse(markdown);
                    const cleanHTML = DOMPurify.sanitize(dirtyHTML);
                    div_tab_content.innerHTML = dirtyHTML;

                    updateIcons(div_tab_content);
                })
                .catch(err =>
                {
                    div_tab_content.innerText = "Error loading markdown";
                    console.error(err);
                });
        }
    }

    function attachTabEvents()
    {
        const tabs = document.querySelectorAll('.tab');
        const contents = document.querySelectorAll('.tab-content');

        tabs.forEach((tab) =>
        {
            tab.addEventListener('click', () =>
            {
                const target = tab.dataset.tab;

                tabs.forEach((t) => t.classList.remove('active'));
                contents.forEach((c) => c.classList.remove('active'));

                tab.classList.add('active');
                document.getElementById(target).classList.add('active');
            });
        });

        if (tabs.length > 0) { tabs[0].click(); }
    }

    fetchBookmarksData();
    attachTabEvents();

</script>
